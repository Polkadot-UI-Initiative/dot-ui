---
title: Transaction Notification
description: A comprehensive transaction lifecycle component with real-time status updates and block explorer integration.
---

import { SimpleTxButtonWithProvider } from "@/registry/dot-ui/blocks/tx-notification/components/simple-tx-button";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { CircleCheck, Clock, AlertCircle, ExternalLink, Loader2 } from "lucide-react";

## Introduction

TxNotification is a comprehensive transaction management system that provides real-time transaction lifecycle tracking, visual status indicators, and seamless block explorer integration. It works in conjunction with transaction buttons to guide users through the entire transaction process from signature to finalization. The system is demonstrated through the SimpleTxButton component which encapsulates both the transaction logic and notification handling.

## Features

- ✅ **Transaction Lifecycle Tracking**: Complete monitoring from signature to finalization
- ✅ **Multiple Status States**: Awaiting signature, submitted, included in block, finalized, error states
- ✅ **Block Explorer Integration**: Direct links to transaction details on Subscan and other explorers
- ✅ **Visual Status Indicators**: Clear icons and colors for each transaction state
- ✅ **Error Handling**: Comprehensive error messages with retry capabilities
- ✅ **Real-time Updates**: Live status updates as transaction progresses
- ✅ **TypeScript**: Full type safety with comprehensive interfaces
- ✅ **Multi-Chain Support**: Works across different Polkadot ecosystem chains

## Installation

```bash
npx polkadot-ui@latest add tx-notification
```

## Usage

### Basic Transaction with Notification

<Tabs defaultValue="preview" className="max-w-[600px]">
  <TabsList>
    <TabsTrigger value="preview">Preview</TabsTrigger>
    <TabsTrigger value="code">Code</TabsTrigger>
  </TabsList>
  <TabsContent value="preview">
    <SimpleTxButtonWithProvider 
      buttonText="Send Transaction"
      placeholder="Enter your message..."
      defaultMessage="Hello from dot-ui!"
    />
  </TabsContent>
  <TabsContent value="code" className="my-0">
```tsx
import { SimpleTxButton } from "@/components/ui/simple-tx-button";
import { txNotification } from "@/components/ui/tx-notification";

function TransactionInterface() {
  const handleSubmit = async () => {
    const toaster = txNotification("Signing Transaction...", chainConfig);
    
    try {
      const tx = api.tx.system.remark("Hello World");
      
      await tx.signAndSend(keypair, (result) => {
        toaster.onTxProgress(result);
      });
    } catch (error) {
      toaster.onTxError(error);
    }
  };

  return (
    <SimpleTxButton 
      buttonText="Send Transaction"
      onSubmit={handleSubmit}
    />
  );
}
```
</TabsContent>
</Tabs>

### Custom Transaction Implementation

<Tabs defaultValue="preview" className="max-w-[600px]">
  <TabsList>
    <TabsTrigger value="preview">Preview</TabsTrigger>
    <TabsTrigger value="code">Code</TabsTrigger>
  </TabsList>
  <TabsContent value="preview">
    <div className="space-y-4">
      <SimpleTxButtonWithProvider 
        buttonText="Custom Remark"
        placeholder="Enter custom message..."
      />
      <div className="text-sm text-muted-foreground">
        <p>• Real-time transaction status updates</p>
        <p>• Block explorer integration</p>
        <p>• Error handling with retry options</p>
      </div>
    </div>
  </TabsContent>
  <TabsContent value="code" className="my-0">
```tsx
import { useState } from "react";
import { Button } from "@/components/ui/button";
import { txNotification } from "@/components/ui/tx-notification";
import { useTypedPolkadotApi } from "@/providers/dedot-provider";

function CustomTransactionButton() {
  const [isLoading, setIsLoading] = useState(false);
  const api = useTypedPolkadotApi();
  
  const handleSubmit = async () => {
    if (!api) return;
    
    setIsLoading(true);
    const toaster = txNotification("Signing Transaction...", chainConfig);
    
    try {
      const tx = api.tx.system.remark("Custom message");
      
      await tx.signAndSend(keypair, (result) => {
        const { status } = result;
        
        // Handle different transaction states
        if (status.type === "BestChainBlockIncluded") {
          console.log("Transaction included in block");
        }
        
        // Pass result to notification system
        toaster.onTxProgress(result);
      });
    } catch (error) {
      toaster.onTxError(error);
    } finally {
      setIsLoading(false);
    }
  };
  
  return (
    <Button onClick={handleSubmit} disabled={isLoading}>
      {isLoading ? "Sending..." : "Send Custom Transaction"}
    </Button>
  );
}
```
</TabsContent>
</Tabs>

### SimpleTxButton Component

<Tabs defaultValue="preview" className="max-w-[600px]">
  <TabsList>
    <TabsTrigger value="preview">Preview</TabsTrigger>
    <TabsTrigger value="code">Code</TabsTrigger>
  </TabsList>
  <TabsContent value="preview">
    <SimpleTxButtonWithProvider 
      buttonText="Send Remark"
      placeholder="Enter your remark message..."
      defaultMessage="Testing transaction notifications"
    />
  </TabsContent>
  <TabsContent value="code" className="my-0">
```tsx
import { SimpleTxButtonWithProvider } from "@/components/ui/simple-tx-button";

function TransactionDemo() {
  return (
    <SimpleTxButtonWithProvider
      buttonText="Send Remark"
      placeholder="Enter your remark message..."
      defaultMessage="Testing transaction notifications"
    />
  );
}
```
</TabsContent>
</Tabs>

## Props

### SimpleTxButton Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `defaultMessage` | `string` | `""` | Default message for the transaction |
| `buttonText` | `string` | `"Send Remark"` | Text displayed on the button |
| `placeholder` | `string` | `"Enter your remark message..."` | Input placeholder text |

### txNotification Function

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `message` | `string` | ✅ | Initial notification message |
| `chainConfig` | `ChainConfig` | ✅ | Chain configuration for explorer URLs |

## Transaction Lifecycle States

The txNotification system tracks transactions through these comprehensive states:

### 1. Awaiting Signature
```tsx
<div className="flex items-center gap-2 text-blue-500">
  <Clock className="w-4 h-4" />
  <span>Awaiting signature...</span>
</div>
```
- User needs to sign the transaction in their wallet
- Shows pulsing clock icon to indicate waiting state
- Provides clear instruction for user action

### 2. Submitted to Network
```tsx
<div className="flex items-center gap-2 text-primary">
  <Loader2 className="w-4 h-4 animate-spin" />
  <span>Transaction submitted</span>
</div>
```
- Transaction has been signed and submitted to the network
- Shows spinning loader to indicate processing
- Waiting for inclusion in a block

### 3. Included in Block
```tsx
<div className="flex items-center gap-2 text-green-500">
  <Loader2 className="w-4 h-4" />
  <span>Included in block #{blockNumber}</span>
  <ExternalLink className="w-4 h-4" />
</div>
```
- Transaction has been included in a block
- Shows success checkmark
- Provides link to block explorer
- Displays block number for reference

### 4. Finalized
```tsx
<div className="flex items-center gap-2 text-green-500">
  <CircleCheck className="w-4 h-4" />
  <span>Transaction finalized</span>
  <ExternalLink className="w-4 h-4" />
</div>
```
- Transaction has been finalized on the blockchain
- Shows darker green color to indicate completion
- Provides permanent link to transaction details
- Final state of successful transaction

### 5. Error States
```tsx
<div className="flex items-center gap-2 text-red-600">
  <AlertCircle className="w-4 h-4" />
  <span>Transaction failed: {errorMessage}</span>
</div>
```
- Various error conditions handled:
  - User rejected signature
  - Insufficient balance
  - Network errors
  - Invalid transaction parameters
- Clear error messaging for debugging

## Block Explorer Integration

### Supported Explorers

#### Subscan (Primary)
- **Features**: Comprehensive transaction details, block information, account history
- **URL Format**: `https://{chain}.subscan.io/extrinsic/{blockNumber}-{txIndex}`
- **Coverage**: Most Polkadot ecosystem chains

#### Polkadot.js Apps
- **Features**: Technical transaction details, raw extrinsic data
- **URL Format**: `https://polkadot.js.org/apps/?rpc={endpoint}#/explorer/query/{txHash}`
- **Coverage**: All Substrate-based chains

#### Custom Explorers
```tsx
// Configure custom explorer URLs:
const explorerConfig = {
  subscan: "https://custom-chain.subscan.io",
  polkadotJs: "https://apps.custom-chain.network",
  custom: "https://explorer.custom-chain.com"
};
```

### Explorer Link Generation

The component automatically generates appropriate links based on transaction state:

```tsx
// Transaction hash links
const txUrl = `${explorerUrls.subscan}/extrinsic/${txHash}`;

// Block number links  
const blockUrl = `${explorerUrls.subscan}/block/${blockNumber}`;

// Account links
const accountUrl = `${explorerUrls.subscan}/account/${address}`;
```

## Status Change Callbacks

### TxStatus Interface
```tsx
interface TxStatus {
  state: 'awaiting-signature' | 'submitted' | 'included' | 'finalized' | 'error';
  txHash?: string;
  blockHash?: string;
  blockNumber?: number;
  error?: string;
  timestamp: number;
}
```

### Usage Examples
```tsx
const handleStatusChange = (status: TxStatus) => {
  // Log all status changes
  console.log(`[${new Date(status.timestamp).toISOString()}] ${status.state}`);
  
  // Handle specific states
  switch (status.state) {
    case 'finalized':
      // Transaction completed successfully
      showSuccessNotification(`Transaction finalized: ${status.txHash}`);
      break;
      
    case 'error':
      // Handle transaction errors
      showErrorNotification(`Transaction failed: ${status.error}`);
      break;
  }
};
```

## Error Handling

### Common Error Scenarios

#### User Rejection
```tsx
// When user cancels transaction in wallet
{
  state: 'error',
  error: 'User rejected the transaction',
  timestamp: Date.now()
}
```

#### Insufficient Balance
```tsx
// When account lacks sufficient funds
{
  state: 'error', 
  error: 'Insufficient balance for transaction',
  timestamp: Date.now()
}
```

#### Network Issues
```tsx
// When network connectivity problems occur
{
  state: 'error',
  error: 'Network error: Unable to broadcast transaction',
  timestamp: Date.now()
}
```

### Retry Mechanisms
```tsx
// Component provides retry functionality for failed transactions
<TxNotification
  onTxStatusChange={(status) => {
    if (status.state === 'error') {
      // Optionally implement retry logic
      setTimeout(() => retryTransaction(), 5000);
    }
  }}
/>
```

## Provider Integration

### TypinkProvider Setup
```tsx
import { PolkadotProvider } from "@/providers/polkadot-provider";

function App() {
  return (
    <PolkadotProvider config={dotUiConfig}>
      <YourTxButton />
    </PolkadotProvider>
  );
}
```

### Chain-Specific Configuration
```tsx
// Different explorer URLs per chain
const chainConfig = {
  paseo: {
    explorerUrls: {
      subscan: "https://paseo.subscan.io"
    }
  },
  polkadot: {
    explorerUrls: {
      subscan: "https://polkadot.subscan.io"
    }
  }
};
```

## Best Practices

### 1. Status Feedback
```tsx
// Provide immediate feedback for user actions
const handleTransactionStart = () => {
  setStatus({ state: 'awaiting-signature', timestamp: Date.now() });
};
```

### 2. Error Communication
```tsx
// Clear, actionable error messages
const getErrorMessage = (error: string) => {
  switch (error) {
    case 'UserRejected':
      return 'Transaction was cancelled. Please try again.';
    case 'InsufficientBalance':
      return 'Insufficient balance. Please add funds to your account.';
    default:
      return `Transaction failed: ${error}`;
  }
};
```

### 3. Explorer Integration
```tsx
// Explorer URLs are configured in chain config
const chainConfig = {
  explorerUrls: {
    subscan: process.env.NEXT_PUBLIC_SUBSCAN_URL,
    polkadotJs: process.env.NEXT_PUBLIC_POLKADOT_APPS_URL
  }
};

// Pass to txNotification function
const toaster = txNotification("Signing Transaction...", chainConfig);
```

## Advanced Usage

### Custom Transaction Monitoring
```tsx
import { txNotification } from "@/components/ui/tx-notification";

function CustomTransactionHandler() {
  const handleTransaction = async () => {
    const toaster = txNotification("Processing Transaction...", chainConfig);
    
    try {
      const tx = api.tx.system.remark("Custom transaction");
      
      await tx.signAndSend(keypair, (result) => {
        const { status } = result;
        
        // Custom monitoring for different states
        if (status.type === "Ready") {
          console.log("Transaction ready for signing");
        } else if (status.type === "BestChainBlockIncluded") {
          console.log("Transaction included in block");
        } else if (status.type === "Finalized") {
          console.log("Transaction finalized");
        }
        
        // Pass to notification system
        toaster.onTxProgress(result);
      });
    } catch (error) {
      toaster.onTxError(error);
    }
  };
  
  return <Button onClick={handleTransaction}>Send Transaction</Button>;
}
```

## Examples

<div className="space-y-6">
  <SimpleTxButtonWithProvider 
    buttonText="Try Transaction"
    placeholder="Enter your test message..."
    defaultMessage="Hello from dot-ui transaction system!"
  />
  
  <div className="border rounded-lg p-4">
    <h3 className="font-medium mb-2 flex items-center gap-2">
      <Clock className="w-4 h-4" />
      Transaction States
    </h3>
    <ul className="text-sm text-muted-foreground space-y-1">
      <li className="flex items-center gap-2">
        <Clock className="w-4 h-4 text-blue-500" />
        <span>Awaiting Signature - User action required</span>
      </li>
      <li className="flex items-center gap-2">
        <Loader2 className="w-4 h-4 text-primary animate-spin" />
        <span>Submitted - Processing on network</span>
      </li>
      <li className="flex items-center gap-2">
        <Loader2 className="w-4 h-4 text-primary animate-spin" />
        <span>Included - Transaction in block</span>
      </li>
      <li className="flex items-center gap-2">
        <CircleCheck className="w-4 h-4 text-green-500" />
        <span>Finalized - Transaction confirmed</span>
      </li>
      <li className="flex items-center gap-2">
        <AlertCircle className="w-4 h-4 text-red-500" />
        <span>Error - Transaction failed</span>
      </li>
    </ul>
  </div>
</div>
