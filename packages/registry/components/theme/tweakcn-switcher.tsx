"use client";

import { useEffect, useMemo, useState } from "react";

const lightPreset = `:root { --background: hsl(0 0% 98.8235%); --foreground: hsl(0 0% 9.0196%); --card: hsl(0 0% 98.8235%); --card-foreground: hsl(0 0% 9.0196%); --popover: hsl(0 0% 98.8235%); --popover-foreground: hsl(0 0% 32.1569%); --primary: hsl(151.3274 66.8639% 66.8627%); --primary-foreground: hsl(153.3333 13.0435% 13.5294%); --secondary: hsl(0 0% 99.2157%); --secondary-foreground: hsl(0 0% 9.0196%); --muted: hsl(0 0% 92.9412%); --muted-foreground: hsl(0 0% 12.5490%); --accent: hsl(0 0% 92.9412%); --accent-foreground: hsl(0 0% 12.5490%); --destructive: hsl(9.8901 81.9820% 43.5294%); --destructive-foreground: hsl(0 100% 99.4118%); --border: hsl(0 0% 87.4510%); --input: hsl(0 0% 96.4706%); --ring: hsl(151.3274 66.8639% 66.8627%); --chart-1: hsl(151.3274 66.8639% 66.8627%); --chart-2: hsl(217.2193 91.2195% 59.8039%); --chart-3: hsl(258.3117 89.5349% 66.2745%); --chart-4: hsl(37.6923 92.1260% 50.1961%); --chart-5: hsl(160.1183 84.0796% 39.4118%); --sidebar: hsl(0 0% 98.8235%); --sidebar-foreground: hsl(0 0% 43.9216%); --sidebar-primary: hsl(151.3274 66.8639% 66.8627%); --sidebar-primary-foreground: hsl(153.3333 13.0435% 13.5294%); --sidebar-accent: hsl(0 0% 92.9412%); --sidebar-accent-foreground: hsl(0 0% 12.5490%); --sidebar-border: hsl(0 0% 87.4510%); --sidebar-ring: hsl(151.3274 66.8639% 66.8627%); --font-sans: Outfit, sans-serif; --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif; --font-mono: monospace; --radius: 0.5rem; --shadow-2xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.09); --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.09); --shadow-sm: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 1px 2px -1px hsl(0 0% 0% / 0.17); --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 1px 2px -1px hsl(0 0% 0% / 0.17); --shadow-md: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 2px 4px -1px hsl(0 0% 0% / 0.17); --shadow-lg: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 4px 6px -1px hsl(0 0% 0% / 0.17); --shadow-xl: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 8px 10px -1px hsl(0 0% 0% / 0.17); --shadow-2xl: 0px 1px 3px 0px hsl(0 0% 0% / 0.43); --tracking-normal: 0.025em; --spacing: 0.25rem; }
.dark { --background: hsl(0 0% 7.0588%); --foreground: hsl(214.2857 31.8182% 91.3725%); --card: hsl(0 0% 9.0196%); --card-foreground: hsl(214.2857 31.8182% 91.3725%); --popover: hsl(0 0% 14.1176%); --popover-foreground: hsl(0 0% 66.2745%); --primary: hsl(154.8980 100.0000% 19.2157%); --primary-foreground: hsl(152.7273 19.2982% 88.8235%); --secondary: hsl(0 0% 14.1176%); --secondary-foreground: hsl(0 0% 98.0392%); --muted: hsl(0 0% 12.1569%); --muted-foreground: hsl(0 0% 63.5294%); --accent: hsl(0 0% 19.2157%); --accent-foreground: hsl(0 0% 98.0392%); --destructive: hsl(6.6667 60.0000% 20.5882%); --destructive-foreground: hsl(12.0000 12.1951% 91.9608%); --border: hsl(0 0% 16.0784%); --input: hsl(0 0% 14.1176%); --ring: hsl(141.8919 69.1589% 58.0392%); --chart-1: hsl(141.8919 69.1589% 58.0392%); --chart-2: hsl(213.1169 93.9024% 67.8431%); --chart-3: hsl(255.1351 91.7355% 76.2745%); --chart-4: hsl(43.2558 96.4126% 56.2745%); --chart-5: hsl(172.4551 66.0079% 50.3922%); --sidebar: hsl(0 0% 7.0588%); --sidebar-foreground: hsl(0 0% 53.7255%); --sidebar-primary: hsl(154.8980 100.0000% 19.2157%); --sidebar-primary-foreground: hsl(152.7273 19.2982% 88.8235%); --sidebar-accent: hsl(0 0% 19.2157%); --sidebar-accent-foreground: hsl(0 0% 98.0392%); --sidebar-border: hsl(0 0% 16.0784%); --sidebar-ring: hsl(141.8919 69.1589% 58.0392%); --font-sans: Outfit, sans-serif; --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif; --font-mono: monospace; --radius: 0.5rem; --shadow-2xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.09); --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.09); --shadow-sm: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 1px 2px -1px hsl(0 0% 0% / 0.17); --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 1px 2px -1px hsl(0 0% 0% / 0.17); --shadow-md: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 2px 4px -1px hsl(0 0% 0% / 0.17); --shadow-lg: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 4px 6px -1px hsl(0 0% 0% / 0.17); --shadow-xl: 0px 1px 3px 0px hsl(0 0% 0% / 0.17), 0px 8px 10px -1px hsl(0 0% 0% / 0.17); --shadow-2xl: 0px 1px 3px 0px hsl(0 0% 0% / 0.43); }`;

const aquaPreset = `:root { --background: hsl(180 21.0526% 92.5490%); --foreground: hsl(188.8000 78.9474% 18.6275%); --card: hsl(180 23.8095% 95.8824%); --card-foreground: hsl(188.8000 78.9474% 18.6275%); --popover: hsl(180 23.8095% 95.8824%); --popover-foreground: hsl(188.8000 78.9474% 18.6275%); --primary: hsl(183.9706 91.8919% 29.0196%); --primary-foreground: hsl(0 0% 100%); --secondary: hsl(180 28.8136% 88.4314%); --secondary-foreground: hsl(188.8000 78.9474% 18.6275%); --muted: hsl(180 19.2308% 89.8039%); --muted-foreground: hsl(184 31.2500% 37.6471%); --accent: hsl(184 38.4615% 84.7059%); --accent-foreground: hsl(188.8000 78.9474% 18.6275%); --destructive: hsl(0 62.4490% 51.9608%); --destructive-foreground: hsl(0 0% 100%); --border: hsl(185.7143 26.5823% 84.5098%); --input: hsl(180 28.8136% 88.4314%); --ring: hsl(183.9706 91.8919% 29.0196%); --chart-1: hsl(183.9706 91.8919% 29.0196%); --chart-2: hsl(183.5294 69.3878% 38.4314%); --chart-3: hsl(183.5556 55.1020% 48.0392%); --chart-4: hsl(183.7168 53.5545% 58.6275%); --chart-5: hsl(183.6145 54.9669% 70.3922%); --sidebar: hsl(186.3158 34.5455% 89.2157%); --sidebar-foreground: hsl(188.8000 78.9474% 18.6275%); --sidebar-primary: hsl(183.9706 91.8919% 29.0196%); --sidebar-primary-foreground: hsl(0 0% 100%); --sidebar-accent: hsl(184 38.4615% 84.7059%); --sidebar-accent-foreground: hsl(188.8000 78.9474% 18.6275%); --sidebar-border: hsl(185.7143 26.5823% 84.5098%); --sidebar-ring: hsl(183.9706 91.8919% 29.0196%); --font-sans: Courier New, monospace; --font-serif: Courier New, monospace; --font-mono: Courier New, monospace; --radius: 0.125rem; --shadow-2xs: 1px 1px 2px 0px hsl(185 70% 30% / 0.07); --shadow-xs: 1px 1px 2px 0px hsl(185 70% 30% / 0.07); --shadow-sm: 1px 1px 2px 0px hsl(185 70% 30% / 0.15), 1px 1px 2px -1px hsl(185 70% 30% / 0.15); --shadow: 1px 1px 2px 0px hsl(185 70% 30% / 0.15), 1px 1px 2px -1px hsl(185 70% 30% / 0.15); --shadow-md: 1px 1px 2px 0px hsl(185 70% 30% / 0.15), 1px 2px 4px -1px hsl(185 70% 30% / 0.15); --shadow-lg: 1px 1px 2px 0px hsl(185 70% 30% / 0.15), 1px 4px 6px -1px hsl(185 70% 30% / 0.15); --shadow-xl: 1px 1px 2px 0px hsl(185 70% 30% / 0.15), 1px 8px 10px -1px hsl(185 70% 30% / 0.15); --shadow-2xl: 1px 1px 2px 0px hsl(185 70% 30% / 0.38); --tracking-normal: 0em; --spacing: 0.25rem; } .dark { --background: hsl(196.3636 52.3810% 8.2353%); --foreground: hsl(180 77.1144% 60.5882%); --card: hsl(192 51.0204% 9.6078%); --card-foreground: hsl(180 77.1144% 60.5882%); --popover: hsl(192 51.0204% 9.6078%); --popover-foreground: hsl(180 77.1144% 60.5882%); --primary: hsl(180 77.1144% 60.5882%); --primary-foreground: hsl(196.3636 52.3810% 8.2353%); --secondary: hsl(191.4286 58.8785% 20.9804%); --secondary-foreground: hsl(180 77.1144% 60.5882%); --muted: hsl(192.8571 58.3333% 14.1176%); --muted-foreground: hsl(180 50.6849% 42.9412%); --accent: hsl(191.4286 58.8785% 20.9804%); --accent-foreground: hsl(180 77.1144% 60.5882%); --destructive: hsl(0 78.8991% 57.2549%); --destructive-foreground: hsl(0 0% 94.9020%); --border: hsl(191.4286 58.8785% 20.9804%); --input: hsl(191.4286 58.8785% 20.9804%); --ring: hsl(180 77.1144% 60.5882%); --chart-1: hsl(180 77.1144% 60.5882%); --chart-2: hsl(180 50.6849% 42.9412%); --chart-3: hsl(180 50.8197% 35.8824%); --chart-4: hsl(184.3478 57.9832% 23.3333%); --chart-5: hsl(185.2174 62.1622% 14.5098%); --sidebar: hsl(196.3636 52.3810% 8.2353%); --sidebar-foreground: hsl(180 77.1144% 60.5882%); --sidebar-primary: hsl(180 77.1144% 60.5882%); --sidebar-primary-foreground: hsl(196.3636 52.3810% 8.2353%); --sidebar-accent: hsl(191.4286 58.8785% 20.9804%); --sidebar-accent-foreground: hsl(180 77.1144% 60.5882%); --sidebar-border: hsl(191.4286 58.8785% 20.9804%); --sidebar-ring: hsl(180 77.1144% 60.5882%); --font-sans: Source Code Pro, monospace; --font-serif: Source Code Pro, monospace; --font-mono: Source Code Pro, monospace; --radius: 0.125rem; --shadow-2xs: 1px 1px 2px 0px hsl(180 70% 60% / 0.10); --shadow-xs: 1px 1px 2px 0px hsl(180 70% 60% / 0.10); --shadow-sm: 1px 1px 2px 0px hsl(180 70% 60% / 0.20), 1px 1px 2px -1px hsl(180 70% 60% / 0.20); --shadow: 1px 1px 2px 0px hsl(180 70% 60% / 0.20), 1px 1px 2px -1px hsl(180 70% 60% / 0.20); --shadow-md: 1px 1px 2px 0px hsl(180 70% 60% / 0.20), 1px 2px 4px -1px hsl(180 70% 60% / 0.20); --shadow-lg: 1px 1px 2px 0px hsl(180 70% 60% / 0.20), 1px 4px 6px -1px hsl(180 70% 60% / 0.20); --shadow-xl: 1px 1px 2px 0px hsl(180 70% 60% / 0.20), 1px 8px 10px -1px hsl(180 70% 60% / 0.20); --shadow-2xl: 0px 1px 3px 0px hsl(180 70% 60% / 0.50); }`;

export function TweakCNSwitcher() {
  const [preset, setPreset] = useState<"light" | "aqua">(() => {
    if (typeof window === "undefined") return "light";
    return (
      (localStorage.getItem("tweakcn-theme") as "light" | "aqua") ?? "light"
    );
  });

  useEffect(() => {
    localStorage.setItem("tweakcn-theme", preset);
  }, [preset]);

  const css = useMemo(
    () => (preset === "aqua" ? aquaPreset : lightPreset),
    [preset]
  );

  return (
    <div className="fixed bottom-4 right-4 z-50 flex items-center gap-2">
      <style id="tweakcn-style" dangerouslySetInnerHTML={{ __html: css }} />
      <button
        type="button"
        onClick={() => setPreset(preset === "aqua" ? "light" : "aqua")}
        className="rounded-md border bg-background px-3 py-1 text-xs shadow-md hover:bg-accent hover:text-accent-foreground"
        aria-label="Toggle TweakCN theme"
      >
        {preset === "aqua" ? "Aqua" : "Light"}
      </button>
    </div>
  );
}
